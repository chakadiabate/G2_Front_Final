<div class="body">
    <app-sidebar></app-sidebar>
    <div class="Bigblock">
        <div class="nav">
            <div class="bloc1">
                <div class="recherche">
                    <span class="cherche">
                        <i class="fa-solid fa-magnifying-glass"></i>
                        <input type="text" placeholder="Recherche">
                    </span>
                </div>
                <div class="profil">
                    <div class="textezone">
                        <img src="assets/images/profil.jpg" alt="">
                        <span><h3>{{ currentUser.prenom }} {{ currentUser.nom }}</h3> <br> {{ currentUser.role.role }}</span>
                    </div>
                    <span><i class="fa-solid fa-circle-chevron-down" routerLink="/reglage"></i></span>
                </div>
            </div>
            <div class="bloc2">
            
                <h1>Liste des Prestateurs</h1>
            
            <div class="droite">
                <a routerLink="/prestateur" (click)="afficherEq()"><i class="fa-solid fa-plus"></i><span>Ajouter Prestateur</span></a>
            </div>
        </div>
        </div>
        
        <div class="tableau">
            <table>
                <tr>
                    <th>ID</th>
                    <th>Nom</th>
                    <th>Email</th>
                    <th>Tel</th>
                    <th>Role</th>
                    <th>Action</th>
                </tr>
            
                <tr *ngFor="let prestateur of prestateurs">
                    <td>{{prestateur.id}}</td>
                    <td>{{prestateur.nom_presta}}</td>
                    <td>{{prestateur.email}}</td>
                    <td>{{prestateur.tel}}</td>
                    <td>{{prestateur.rolePrestateur.role? prestateur.rolePrestateur.role: 'Non défini'}}</td>               
                
                    <td>
                        <i  (click)="afficherEq()" (click)="editPresta(prestateur)"  style="color: rgb(53, 53, 238);" class="fa-solid fa-pen-to-square"></i>
                        <i  *ngIf="prestateur.id !== undefined" (click)="deletePresta(prestateur.id)"  style="color: red;" class="fa-solid fa-trash"></i>
                    </td>
                  </tr>
            </table>
            <!-- <pagination-controls (pageChange)="p = $event"></pagination-controls> -->
    </div>

    <div class="ombre" *ngIf="visibleEq">
        <form [formGroup]="PrestateurForm" (ngSubmit)="onSubmit()">
            <div class="btnFermer" (click)="cacherEq()"><i class="fa-solid fa-xmark"></i></div>
            <h1>{{ isEditing ? 'Modifier Prestateur' : 'Ajouter Prestateur' }}</h1>
            <div class="input">
                <div class="Entree">
                    <label for="">Nom</label>
                    <input type="text" placeholder="Nom" formControlName="nom_presta">
                </div>
                <div class="Entree">
                    <label for="">Addresse mail</label>
                    <input type="text" placeholder="Addresse mail" formControlName="email">
                </div>
                <div class="Entree">
                    <label for="">Telephone</label>
                    <input type="text" placeholder="Numero de telephone" formControlName="tel">
                </div>
                <div class="Entree">
                    <label for="">Profile</label>
                    <input type="text" placeholder="profile" formControlName="profile">
                </div>
                <!-- <div class="Entree">
                    <label for="">Organisateur</label>
                    <select id="utilisateurId" formControlName="utilisateur" class="form-control">
                      <option *ngFor="let orga of Orga" [value]="orga.id">{{ orga.nom }}</option>
                    </select>
                  </div> -->
                  <div class="Entree">
                    <label for="">RolePresta</label>
                    <select id="rolePrestateurId" formControlName="rolePrestateur" class="form-control">
                      <option *ngFor="let role of Role" [value]="role.id">{{ role.role }}</option>
                    </select>
                  </div>
                  
            </div>
            <div class="btnAjouter"><button type="submit">{{ isEditing ? 'Modifier' : 'Ajouter' }}</button></div>
        </form>
    </div>

    <div class="cancel" *ngIf="visibleSup">
        <div class="cancel-content">
            <div class="btnFermer" (click)="cacherSup()"><i class="fa-solid fa-times"></i></div>
               <h1>Voulez-vous vraiment annuler cette tâche?</h1>
               <div class="actions-annulation">
                  <div class="btnAnnuler" (click)="cacherSup()"> <button>Annuler</button></div>
                  <div class="btnConfirmer"> <button>Confirmer</button></div>
               </div>
           </div>
     </div>















    
        <!-- <div class="ombre" *ngIf="visible">
            <form (ngSubmit)="modifierReservation()">
                <div class="btnFermer" (click)="cacher()"><i class="fa-solid fa-xmark"></i></div>
                <h1>Modifier Reservation</h1>
                <div class="input">
                    Your existing inputs
                    <div class="Entree">
                        <label for="">Nom</label>
                        <input type="text" placeholder="Nom de l'événement" name="nom">
                    </div>
                    <div class="Entree">
                        <label for="">Date de début</label>
                        <input type="date" placeholder="Date de début" name="dateDebut">
                    </div>
                    <div class="Entree">
                        <label for="">Date de fin</label>
                        <input type="date" placeholder="Date de fin" name="dateFin">
                    </div>
                    <div class="Entree">
                        <label for="">A faire</label>
                        <input type="checkbox" [ name="aFaire">
                    </div>
                    <div class="Entree">
                        <label for="">En cours</label>
                        <input type="checkbox" name="enCours">
                    </div>
                    <div class="Entree">
                        <label for="">Terminé</label>
                        <input type="checkbox" name="termine">
                    </div>
                </div>
                <div class="btnAjouter"> <button type="submit">Modifier</button></div>
            </form>
        </div> -->
        <!-- <div class="cancel" *ngIf="visibleSup">
            <div class="cancel-content">
                <div class="btnFermer" (click)="cacherSup()"><i class="fa-solid fa-times"></i></div>
                <h1>Voulez-vous vraiment annuler cette réservation?</h1>
                <div class="actions-annulation">
                    <div class="btnAnnuler"> <button (click)="annuler()">Annuler</button></div>
                    <div class="btnConfirmer"> <button (click)="confirmer()">Confirmer</button></div>
                </div>
            </div>
        </div> -->
    </div>
</div>
