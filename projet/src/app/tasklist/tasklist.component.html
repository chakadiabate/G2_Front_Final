<div class="body">
    <app-sidebar></app-sidebar>
    <div class="Bigblock">
        <div class="nav">
            <div class="bloc1">
                <div class="recherche">
                    <span class="cherche">
                        <i class="fa-solid fa-magnifying-glass"></i>
                        <input type="text" placeholder="Recherche">
                    </span>
                </div>
                <div class="profil">
                    <div class="textezone">
                        <img src="assets/images/profil.jpg" alt="">
                        <span><h3>{{ currentUser.prenom }} {{ currentUser.nom }}</h3> <br> {{ currentUser.role.role }}</span>
                    </div>
                    <span><i class="fa-solid fa-circle-chevron-down" routerLink="/reglage"></i></span>
                </div>
            </div>
            <div class="bloc2">
            
                <h1>Liste des taches</h1>
            
            <div class="droite">
                <a routerLink="/tasklist" (click)="afficherEq()"><i class="fa-solid fa-plus"></i><span>Ajouter des tâches</span></a>
            </div>
        </div>
        </div>
        
        <div class="tableau">
            <table>
                <tr>
                    <th>ID</th>
                    <th>title</th>
                    <th>Nom-Event</th>
                    <th>Nom-Priorite</th>
                    <th>Nom-User</th>
                    <th>Action</th>

                </tr>
            
                <tr *ngFor="let tache of tasks" >
                    <td>{{tache.id}}</td>
                    <td>{{tache.title}}</td>
                    <td>{{tache.evenement.nom}}</td>
                    <td>{{tache.priority.priority}}</td>
                    <td>{{tache.utilisateur.nom}}</td>
                    <td>
                        <i  (click)="afficherEq()" (click)="editTache(tache)" style="color: rgb(53, 53, 238);" class="fa-solid fa-pen-to-square"></i>
                        <i (click)="afficherSupprimer()" *ngIf="tache.id !== undefined" (click)="deleteTache(tache.id)"  style="color: red;" class="fa-solid fa-trash"></i>
                    </td>
                  </tr>
            </table>
            <!-- <pagination-controls (pageChange)="p = $event"></pagination-controls> -->
    </div>

    <div class="ombre" *ngIf="visibleEq">
        <form [formGroup]="taskForm" (ngSubmit)="onSubmit()">
            <div class="btnFermer" (click)="cacherEq()"><i class="fa-solid fa-xmark"></i></div>
            <h1>{{ isEditing ? 'Modifier tâches' : 'Ajouter tâches' }}</h1>
            <div class="input">
                <div class="Entree">
                    <label for="">title</label>
                    <input type="text" placeholder="title" formControlName="title">
                </div>
                <div class="Entree">
                    <label for="">Even_id</label>
                    <select id="roleId" formControlName="evenement" class="form-control">
                        <option *ngFor="let even of Even" [value]="even.id">{{ even.nom }}</option>
                    </select>
                </div>
                <div class="Entree">
                    <label for="">priority_id</label>
                    <select id="roleId" formControlName="priority" class="form-control">
                        <option *ngFor="let priorite of Priorite" [value]="priorite.id">{{ priorite.priority }}</option>
                    </select>
                </div>
                <div class="Entree">
                    <label for="">user_id</label>
                    <select id="roleId" formControlName="utilisateur" class="form-control">
                        <option *ngFor="let uti of Uti" [value]="uti.id">{{ uti.nom }}</option>
                    </select>
                </div>
                
            </div>
            <button type="submit" class="btnAjouter">{{ isEditing ? 'Modifier' : 'Ajouter' }}</button>
        </form>
    </div>

    <div class="cancel" *ngIf="visibleSup">
        <div class="cancel-content">
            <div class="btnFermer" (click)="cacherSup()"><i class="fa-solid fa-times"></i></div>
               <h1>Voulez-vous vraiment annuler cette tâche?</h1>
               <div class="actions-annulation">
                  <div class="btnAnnuler" (click)="cacherSup()"> <button>Annuler</button></div>
                  <div class="btnConfirmer"> <button>Confirmer</button></div>
               </div>
           </div>
     </div>















    
        <!-- <div class="ombre" *ngIf="visible">
            <form (ngSubmit)="modifierReservation()">
                <div class="btnFermer" (click)="cacher()"><i class="fa-solid fa-xmark"></i></div>
                <h1>Modifier Reservation</h1>
                <div class="input">
                    Your existing inputs
                    <div class="Entree">
                        <label for="">Nom</label>
                        <input type="text" placeholder="Nom de l'événement" name="nom">
                    </div>
                    <div class="Entree">
                        <label for="">Date de début</label>
                        <input type="date" placeholder="Date de début" name="dateDebut">
                    </div>
                    <div class="Entree">
                        <label for="">Date de fin</label>
                        <input type="date" placeholder="Date de fin" name="dateFin">
                    </div>
                    <div class="Entree">
                        <label for="">A faire</label>
                        <input type="checkbox" [ name="aFaire">
                    </div>
                    <div class="Entree">
                        <label for="">En cours</label>
                        <input type="checkbox" name="enCours">
                    </div>
                    <div class="Entree">
                        <label for="">Terminé</label>
                        <input type="checkbox" name="termine">
                    </div>
                </div>
                <div class="btnAjouter"> <button type="submit">Modifier</button></div>
            </form>
        </div> -->
        <!-- <div class="cancel" *ngIf="visibleSup">
            <div class="cancel-content">
                <div class="btnFermer" (click)="cacherSup()"><i class="fa-solid fa-times"></i></div>
                <h1>Voulez-vous vraiment annuler cette réservation?</h1>
                <div class="actions-annulation">
                    <div class="btnAnnuler"> <button (click)="annuler()">Annuler</button></div>
                    <div class="btnConfirmer"> <button (click)="confirmer()">Confirmer</button></div>
                </div>
            </div>
        </div> -->
    </div>
</div>
